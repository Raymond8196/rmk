# Elink åè®®å¼€å‘è·¯çº¿å›¾

RMK ä¸­ Elink åè®®é›†æˆçš„çŠ¶æ€å’Œæœªæ¥è®¡åˆ’ã€‚

**[English Version](roadmap.md)**

---

## é¡¹ç›®çŠ¶æ€

### âœ… é˜¶æ®µ 1: æ ¸å¿ƒåè®®ï¼ˆå·²å®Œæˆï¼‰

**å·²å®Œæˆ:**
- [x] å®šä¹‰å¸§ç»“æ„ï¼ˆStandardFrame, CompatibleFrameï¼‰
- [x] å®ç° CRC4/CRC16 è®¡ç®—å’ŒéªŒè¯
- [x] è®¾è®¡ä¼˜å…ˆçº§ç³»ç»Ÿï¼ˆ4 çº§ï¼‰
- [x] æ‰©å±•è®¾å¤‡å¯»å€ï¼ˆ16 ä½ï¼‰
- [x] å¸§è§£æå’Œåºåˆ—åŒ–
- [x] é”™è¯¯ç±»å‹å’Œå¤„ç†

**ç›¸å…³æ–‡ä»¶:**
- `elink-protocol/elink-core/src/protocol_frame.rs`
- `elink-protocol/elink-core/src/protocol_crc.rs`
- `elink-protocol/elink-core/src/priority.rs`

### âœ… é˜¶æ®µ 2: RMK é›†æˆï¼ˆå·²å®Œæˆï¼‰

**å·²å®Œæˆ:**
- [x] åˆ›å»º `elink-rmk-adapter` crate
- [x] å®ç° `ElinkAdapter`ï¼ˆç¼–ç /è§£ç ï¼‰
- [x] å°† `SplitMessage` æ˜ å°„åˆ° Elink å¸§
- [x] å®ç° `SplitReader`/`SplitWriter` traits
- [x] ç‰¹æ€§é—¨æ§é›†æˆï¼ˆ`elink` ç‰¹æ€§ï¼‰
- [x] No_std å…¼å®¹æ€§éªŒè¯

**ç›¸å…³æ–‡ä»¶:**
- `elink-protocol/elink-rmk-adapter/src/adapter.rs`
- `elink-protocol/elink-rmk-adapter/src/message_mapper.rs`
- `rmk/src/split/elink/mod.rs`

### âœ… é˜¶æ®µ 3: ä¼˜åŒ–ï¼ˆå·²å®Œæˆï¼‰

**å·²å®Œæˆ:**
- [x] å‡å°‘ç¼“å†²åŒºå¤§å°ï¼ˆæ¥æ”¶ç¼“å†²åŒº 1024â†’512 å­—èŠ‚ï¼‰
- [x] ä¼˜åŒ–å¾ªç¯é€»è¾‘ï¼ˆä¼˜å…ˆæ£€æŸ¥é€‚é…å™¨ç¼“å†²åŒºï¼‰
- [x] å‡å°‘ä¸´æ—¶ç¼“å†²åŒºï¼ˆ256â†’128 å­—èŠ‚ï¼‰
- [x] å†…å­˜å ç”¨å‡å°‘ï¼ˆèŠ‚çœ 47.6%ï¼‰
- [x] CPU ä½¿ç”¨ä¼˜åŒ–ï¼ˆå‡å°‘ 50% ä¸å¿…è¦çš„è°ƒç”¨ï¼‰

**æ–‡æ¡£:**
- `ELINK_EMBEDDED_OPTIMIZATION.md`
- `ELINK_OPTIMIZATION_SUMMARY.md`

### âœ… é˜¶æ®µ 4: æµ‹è¯•ä¸æ–‡æ¡£ï¼ˆå·²å®Œæˆï¼‰

**å·²å®Œæˆ:**
- [x] PC æµ‹è¯•å·¥å…·ï¼ˆ`pc_test.rs`ï¼‰
- [x] åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼ˆ`benchmark.rs`ï¼‰
- [x] æ€§èƒ½åˆ†ææ–‡æ¡£
- [x] é›†æˆæŒ‡å—
- [x] ä½¿ç”¨æ–‡æ¡£
- [x] å¯è¡Œæ€§è¯„ä¼°

**æˆæœ:**
- åŸºå‡†æµ‹è¯•ç»“æœ: 22.59Âµs æ€»å»¶è¿Ÿ
- å†…å­˜ä½¿ç”¨: 760 å­—èŠ‚
- CPU å¼€é”€: < 0.5%

## å½“å‰çŠ¶æ€: å‡†å¤‡ç¡¬ä»¶æµ‹è¯•

Elink åè®®å¯¹äºæ­£å¸¸çš„é”®ç›˜ä½¿ç”¨åœºæ™¯å·²**åŠŸèƒ½å®Œæ•´**ã€‚ä¸‹ä¸€é˜¶æ®µé‡ç‚¹æ˜¯åŸºäºå®é™…æµ‹è¯•çš„éªŒè¯å’Œæ”¹è¿›ã€‚

---

## ğŸš§ é˜¶æ®µ 5: ç¡¬ä»¶éªŒè¯ï¼ˆè¿›è¡Œä¸­ï¼‰

**ç›®æ ‡:**
- åœ¨å®é™… STM32H7 ç¡¬ä»¶ä¸ŠéªŒè¯
- åœ¨ nRF52840 BLE åˆ†ä½“é”®ç›˜ä¸Šæµ‹è¯•
- é•¿æœŸç¨³å®šæ€§æµ‹è¯•ï¼ˆ24+ å°æ—¶ï¼‰
- å®é™…ä½¿ç”¨åé¦ˆ

**ä»»åŠ¡:**

### ç¡¬ä»¶æµ‹è¯•
- [ ] åœ¨ STM32H7 é”®ç›˜ä¸Šæµ‹è¯•
- [ ] åœ¨ nRF52840 BLE åˆ†ä½“ä¸Šæµ‹è¯•
- [ ] åœ¨ RP2040 åˆ†ä½“ä¸Šæµ‹è¯•
- [ ] ä½¿ç”¨é€»è¾‘åˆ†æä»ªéªŒè¯

### æ€§èƒ½éªŒè¯
- [ ] æµ‹é‡ç¡¬ä»¶ä¸Šçš„å®é™…å»¶è¿Ÿ
- [ ] åœ¨è®¾å¤‡ä¸Šåˆ†æ CPU ä½¿ç”¨
- [ ] è¿è¡Œæ—¶ç›‘æ§å†…å­˜ä½¿ç”¨
- [ ] åœ¨å„ç§è´Ÿè½½åœºæ™¯ä¸‹æµ‹è¯•

### ç¨³å®šæ€§æµ‹è¯•
- [ ] 24 å°æ—¶è¿ç»­æ‰“å­—æµ‹è¯•
- [ ] å‹åŠ›æµ‹è¯•ï¼ˆå¿«é€ŸæŒ‰é”®ï¼‰
- [ ] BLE é‡è¿åœºæ™¯
- [ ] ç”µæºå¾ªç¯æ¢å¤

**æ—¶é—´çº¿:** 2-4 å‘¨

---

## ğŸ”® é˜¶æ®µ 6: é«˜çº§åŠŸèƒ½ï¼ˆè®¡åˆ’ä¸­ï¼‰

### ä¼˜å…ˆçº§: é«˜

#### è‡ªåŠ¨é‡è¯•æœºåˆ¶
- **ç›®æ ‡**: CRC å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **å®ç°**: å‘é€‚é…å™¨æ·»åŠ é‡è¯•è®¡æ•°å™¨
- **å¥½å¤„**: åœ¨å˜ˆæ‚çš„ BLE ç¯å¢ƒä¸­æé«˜å¯é æ€§

```rust
pub struct ElinkAdapter {
    max_retries: u8,
    // ...
}
```

**é¢„è®¡å·¥ä½œé‡:** 1 å‘¨

#### åŠ¨æ€ä¼˜å…ˆçº§è°ƒæ•´
- **ç›®æ ‡**: æ ¹æ®é˜Ÿåˆ—æ·±åº¦è°ƒæ•´æ¶ˆæ¯ä¼˜å…ˆçº§
- **å®ç°**: ç›‘æ§å¾…å¤„ç†æ¶ˆæ¯æ•°ï¼Œé˜Ÿåˆ—å¢é•¿æ—¶æå‡ä¼˜å…ˆçº§
- **å¥½å¤„**: è´Ÿè½½ä¸‹æ›´å¥½çš„å“åº”æ€§

**é¢„è®¡å·¥ä½œé‡:** 2 å‘¨

### ä¼˜å…ˆçº§: ä¸­

#### å¤šå¤–è®¾ä¼˜åŒ–
- **ç›®æ ‡**: ä¸º 3+ ä¸ªå¤–è®¾çš„é”®ç›˜ä¼˜åŒ–
- **å®ç°**: å…±äº«ç¼“å†²æ± ï¼ŒåŸºäºä¼˜å…ˆçº§çš„è°ƒåº¦
- **å¥½å¤„**: ä¸ºå¤æ‚è®¾ç½®å‡å°‘å†…å­˜å¼€é”€

**é¢„è®¡å·¥ä½œé‡:** 2-3 å‘¨

#### å‹ç¼©æ”¯æŒ
- **ç›®æ ‡**: å¯é€‰çš„å¸§æœ‰æ•ˆè½½è·å‹ç¼©
- **å®ç°**: é›†æˆè½»é‡çº§å‹ç¼©ï¼ˆä¾‹å¦‚ heatshrinkï¼‰
- **å¥½å¤„**: ä¸ºå¤æ‚æ¶ˆæ¯å‡å°‘å¸¦å®½

**é¢„è®¡å·¥ä½œé‡:** 3-4 å‘¨

### ä¼˜å…ˆçº§: ä½

#### åŠ å¯†å¸§
- **ç›®æ ‡**: æ•æ„Ÿæ•°æ®çš„å¯é€‰åŠ å¯†
- **å®ç°**: åœ¨åºåˆ—åŒ–å’Œæˆå¸§ä¹‹é—´æ·»åŠ åŠ å¯†å±‚
- **å¥½å¤„**: å¢å¼ºå®‰å…¨æ€§ï¼ˆè™½ç„¶ BLE å·²æä¾›åŠ å¯†ï¼‰

**é¢„è®¡å·¥ä½œé‡:** 2-3 å‘¨

#### é¥æµ‹å’Œè¯Šæ–­
- **ç›®æ ‡**: å†…ç½®å¸§ç»Ÿè®¡å’Œé”™è¯¯æŠ¥å‘Š
- **å®ç°**: CRC é”™è¯¯ã€é‡è¯•ã€ç¼“å†²åŒºæº¢å‡ºçš„è®¡æ•°å™¨
- **å¥½å¤„**: æ›´å®¹æ˜“è°ƒè¯•å’Œç›‘æ§

**é¢„è®¡å·¥ä½œé‡:** 1 å‘¨

---

## ğŸ¯ é˜¶æ®µ 7: ä¸Šæ¸¸é›†æˆï¼ˆæœªæ¥ï¼‰

**ç›®æ ‡**: å°† Elink è´¡çŒ®åˆ°ä¸Šæ¸¸ RMK ä»“åº“

### å‰ææ¡ä»¶
- [ ] ç¡¬ä»¶æµ‹è¯•å®Œæˆå¹¶æœ‰ç§¯æç»“æœ
- [ ] åœ¨ç”Ÿäº§é”®ç›˜ä¸­è‡³å°‘ 3 ä¸ªæœˆçš„ç¨³å®šä½¿ç”¨
- [ ] æ•´åˆç¤¾åŒºåé¦ˆ
- [ ] å®Œæ•´çš„æ–‡æ¡£å’Œç¤ºä¾‹
- [ ] RMK ç»´æŠ¤è€…æ‰¹å‡†

### ä»»åŠ¡
- [ ] å‡†å¤‡ç»¼åˆ PR
- [ ] ä¸ºç°æœ‰ç”¨æˆ·ç¼–å†™è¿ç§»æŒ‡å—
- [ ] åˆ›å»ºä¸ç°æœ‰åè®®çš„æ¯”è¾ƒæ–‡æ¡£
- [ ] ä¸º Elink æ·»åŠ  CI/CD æµ‹è¯•
- [ ] æä¾›ä½¿ç”¨ Elink çš„ç¤ºä¾‹é”®ç›˜

**æ—¶é—´çº¿:** ä»ç°åœ¨èµ· 6+ ä¸ªæœˆ

---

## é•¿æœŸæ„¿æ™¯

### 1.0 ç‰ˆæœ¬ç›®æ ‡

- [ ] åœ¨ 5+ ä¸ªä¸åŒ MCU å¹³å°ä¸Šè¯æ˜ç¨³å®š
- [ ] åœ¨ 10+ ä¸ªç”Ÿäº§é”®ç›˜ä¸­ä½¿ç”¨
- [ ] æ­£å¼åè®®è§„èŒƒæ–‡æ¡£
- [ ] QMK/ZMK çš„å‚è€ƒå®ç°ï¼ˆç¤¾åŒºé©±åŠ¨ï¼‰
- [ ] åè®®åˆ†æå·¥å…·ï¼ˆä¾‹å¦‚ Wireshark dissectorï¼‰

### 2.0 ç‰ˆæœ¬ç›®æ ‡

- [ ] å¤šè·³æ”¯æŒï¼ˆèŠèŠ±é“¾å¤–è®¾ï¼‰
- [ ] è‡ªåŠ¨æ‹“æ‰‘å‘ç°
- [ ] çƒ­æ’æ‹”å¤–è®¾æ”¯æŒ
- [ ] æ ‡å‡†åŒ–è®¾å¤‡ç±»åˆ«ï¼ˆé”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸æ¿ã€å±å¹•ï¼‰

---

## ä¸ºè·¯çº¿å›¾åšè´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºå¯¹è·¯çº¿å›¾ä¼˜å…ˆçº§çš„æ„è§ã€‚å»ºè®®åŠŸèƒ½ï¼š

1. åœ¨ RMK ä»“åº“ä¸­æ‰“å¼€ GitHub discussion
2. æè¿°ä½¿ç”¨åœºæ™¯å’Œå¥½å¤„
3. å¦‚æœå¯èƒ½æä¾›æŠ€æœ¯ç»†èŠ‚
4. è¡¨æ˜æ„¿æ„è´¡çŒ®å®ç°

ä¼˜å…ˆçº§ç»™äºˆï¼š
- æœ‰æ˜ç¡®ä½¿ç”¨åœºæ™¯çš„åŠŸèƒ½
- æœ‰ç¤¾åŒºæ”¯æŒçš„åŠŸèƒ½
- ä¿æŒå‘åå…¼å®¹çš„åŠŸèƒ½
- ä¸æ˜¾è‘—å¢åŠ å¤æ‚æ€§çš„åŠŸèƒ½

---

## ç‰ˆæœ¬å†å²

- 2026-02-09: åˆå§‹è·¯çº¿å›¾åˆ›å»º
  - è®°å½•å·²å®Œæˆçš„é˜¶æ®µ 1-4
  - å®šä¹‰é˜¶æ®µ 5ï¼ˆç¡¬ä»¶éªŒè¯ï¼‰
  - è®¡åˆ’é˜¶æ®µ 6-7ï¼ˆé«˜çº§åŠŸèƒ½ã€ä¸Šæ¸¸é›†æˆï¼‰

---

*æœ€åæ›´æ–°: 2026-02-09*
